<section class="context_help_section">
  <div class="context_help_summary">
    <p>
      The <b>initial_payload</b> parameter provides a starting data that can be
      referenced later by service(s). This parameter is a dictionary with key/value
      pairs. This parameter is always present and will default to "<b>{ }</b>".
    </p>
    <p>
      Important note: only one <b>initial_payload</b> matters - the one selected on the
      service or workflow being run. Inside of a workflow, an
      <b>initial_payload</b> defined on a service that is part of that workflow will
      have no effect when running the enclosing workflow.
    </p>
  </div>
  <div class="context_help_tip">
    Alternatives to using <b>initial_payload</b>:
    <ul>
      <li>
        In some cases, using a REST Service to lookup values can offers some design
        advantages.
      </li>
      <li>...</li>
    </ul>
  </div>
  <div class="context_help_example">
<code class="snippet" language="javascript">{
      "rest_url": "https://www.example.com/",
      "current_version": "1.0.3",
      "new_version": "2.0.1"
}</code>
  </div>
</section>
<section class="context_help_section">
  <div class="context_help_summary">
    Here is another example of the <b>initial_payload</b> showing some nested values:
  </div>
  <div class="context_help_example">
    <code class="snippet" language="javascript">{
  "bool_parameter": true,
  "float_parameter": 3.14,
  "int_parameter": 13,
  "nested":
      {
        "key1": "value1",
        "key2": 2.81,
        "key3": false
      }, "rest_url":
  "https://example.com/"
}</code>
  </div>
</section>
<section class="context_help_section">
    <div class="context_help_summary">
        This is an example of how to use the <b>initial_payload</b> later
        in a Python Snippet Service - as the variable <b><text style="background-color: #FFFF00">payload</text></b>.
    </div>
    <div class="context_help_usage">
<code class="snippet" language="python" highlight="payload"># Example python snippet
import logging
import traceback
result = {}
results["success"] = False
try:
    log("info", f"Hello {device.name}!")
    assert (payload["bool_parameter"] == True)
    assert (payload["rest_url"] == "nope not going to match"); # Test - forced a failure
    log("info", f"Goodbye {device.name}!")
    results["success"] = True
except AssertionError:
    # Write to the workflow log
    log("error", f"Assertion failed: {traceback.format_exc(5)}")
    results["result"] = "An assertion has failed; check service/workflow log."
except Exception:
    # Write to the system log
    logging.error(f"Exception occurred: {traceback.format_exc(5)}")
    results["result"] = "An unhandled exception has occurred; check the system log."
finally:
    results["result"] = result
        </code>
    </div>
</section>
